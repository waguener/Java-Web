<ui:composition template="/template/Layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="titulo">Cadastrar Alunos</ui:define>

	<ui:define name="conteudo">
		<div class="ui-fluid">
			<h:form id="form"
				style="width: 100%; font-weight:bold;font-size: 12px; margin-top:1%">
				#{responsavelController.init()}
				<p:panelGrid columns="1" layout="grid" style="margin-top:80px"
					styleClass="panelgrid-noborder" columnClasses="ui-grid-col-12">
					<p:outputLabel value="Cadastro do Responsável pelo Aluno"
						style="font-size: 26pt;font-family:'Cabin', sans-serif" />
				</p:panelGrid>

				<p:fieldset legend="Dados do Responsável" >

					<p:panelGrid columns="3" layout="grid" style="margin-top:10px"
						styleClass="panelgrid-noborder"
						columnClasses="ui-grid-col-8,ui-grid-col-1,ui-grid-col-3">

						<p:panelGrid columns="1" layout="grid" style="margin-top:10px"
							styleClass="panelgrid-noborder" columnClasses="ui-grid-col-12">

							<p:panelGrid columns="5" layout="grid" style="margin-top:10px"
								styleClass="panelgrid-noborder"
								columnClasses="ui-grid-col-1,ui-grid-col-6,ui-grid-col-0.5,ui-grid-col-1.5,ui-grid-col-3.5">

								<p:outputLabel value="Nome" style="font-size: 16pt;" />
								<p:inputText value="#{responsavelController.responsavel.nome}" required="true" requiredMessage="Informe o Nome"
									style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
									onkeyup="this.value = this.value.toUpperCase()" />
								<p:outputLabel />
								<p:outputLabel value="CPF" style="font-size: 16pt;" />
								<p:inputMask value="#{responsavelController.responsavel.cpf}" required="true" requiredMessage="Informe o CPF"
									style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
									mask="999.999.999-99" size="15" />
							</p:panelGrid>
							<p:panelGrid columns="8" layout="grid" style="margin-top:10px"
								styleClass="panelgrid-noborder"
								columnClasses="ui-grid-col-1,ui-grid-col-4,ui-grid-col-0.5,ui-grid-col-1.5,ui-grid-col-3.5">
								<p:outputLabel value="RG" style="font-size: 16pt;" />
								<p:inputText value="#{responsavelController.responsavel.rg}"
									size="15" required="true" requiredMessage="Informe o RG"
									style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;" />
								<p:outputLabel />
								<p:outputLabel value="Parentesco" style="font-size: 16pt;" />
								<p:inputText value="#{responsavelController.responsavel.parentesco}"
									size="15" required="true" requiredMessage="Informe o Parentesco"
									style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;" 
									onkeyup="this.value = this.value.toUpperCase()"/>
								<p:outputLabel />
								
							</p:panelGrid>
							<p:panelGrid columns="5" layout="grid" style="margin-top:10px"
								styleClass="panelgrid-noborder"
								columnClasses="ui-grid-col-2,ui-grid-col-6.5,ui-grid-col-1,ui-grid-col-1,ui-grid-col-1.5">
								<p:outputLabel value="Profissão" style="font-size: 16pt;" />
								<p:inputText value="#{responsavelController.responsavel.profissao}"
									size="45" required="true" requiredMessage="Informe o Parentesco"
									style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;" 
									onkeyup="this.value = this.value.toUpperCase()"/>
								<p:outputLabel value="Ativo" style="font-size: 16pt;" />
								<p:selectBooleanCheckbox value="#{responsavelController.responsavel.ativo}"
									required="true" requiredMessage="Informe se está Ativo"
									style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;" />
							</p:panelGrid>
						</p:panelGrid>
						<p:outputLabel />
						<p:panelGrid columns="1" id="grid-update"
							styleClass="panelgrid-noborder" columnClasses="ui-grid-col-12">

							<h:outputLabel value="Foto" />

							<h:panelGrid columns="3" id="imagem-professor"
								styleClass="panelgrid-noborder">
								<f:facet name="header">
									<p:graphicImage library="imagens" name="sem_foto.png"
										width="110px" height="140px"
										rendered="#{responsavelController.responsavel.foto == null}" />

									<p:graphicImage value="#{responsavelController.responsavel.imagem}"
										rendered="#{responsavelController.responsavel.foto != null}"
										width="120px" height="140px" id="foto" cache="false"
										style="margin-left:10px; box-shadow: 1px 1px 4px;border-radius: 10px; " />

								</f:facet>

								<p:commandButton value="Incluir Imagem"
									rendered="#{responsavelController.responsavel.foto == null}"
									action="#{responsavelController.abrirTela}"
									icon="fa fa-file-image-o" process="@this" />

								<p:commandButton value="Alterar Imagem"
									rendered="#{responsavelController.responsavel.foto != null}"
									icon="fa fa-exchange" process="@this"
									action="#{responsavelController.abrirTela}" />

								<p:commandButton value="Excluir" icon="fa fa-trash-o"
									style="width: 80px; font-size: 12px;font-weight: bold"
									process="@this" update="imagem-professor"
									action="#{responsavelController.apagarFoto}"
									rendered="#{responsavelController.responsavel.foto != null}" />

							</h:panelGrid>
						</p:panelGrid>
					</p:panelGrid>
				</p:fieldset>
				<p:panelGrid columns="2" layout="grid" style="margin-top:10px"
					styleClass="panelgrid-noborder"
					columnClasses="ui-grid-col-9,ui-grid-col-3">

				</p:panelGrid>
				
				

				<p:fieldset legend="Contato" style="margin-top:15px">
					<p:panelGrid columns="5" layout="grid" style="margin-top:10px"
						styleClass="panelgrid-noborder"
						columnClasses="ui-grid-col-1.5,ui-grid-col-3,ui-grid-col-2,ui-grid-col-1.5,ui-grid-col-3">
						<p:outputLabel value="E-Mail" style="font-size: 16pt;" />
						<p:inputText
							value="#{responsavelController.responsavel.contato.email}" size="32"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;" />
						<p:outputLabel />
						<p:outputLabel value="Tel.Fixo" style="font-size: 16pt;" />
						<p:inputMask
							value="#{responsavelController.responsavel.contato.telFixo}"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
							mask="(99) 9999 - 9999" size="15" />
					</p:panelGrid>
					<p:panelGrid columns="8" layout="grid" style="margin-top:10px"
						styleClass="panelgrid-noborder"
						columnClasses="ui-grid-col-0.9,ui-grid-col-3,ui-grid-col-0.5,ui-grid-col-0.9,ui-grid-col-3,ui-grid-col-0.5,ui-grid-col-0.9,ui-grid-col-3.3">
						<p:outputLabel value="Cel.1" style="font-size: 16pt;" dir="rtl" />
						<p:inputMask value="#{responsavelController.responsavel.contato.cel1}"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
							mask="(99) 9 9999 - 9999" size="15" />
						<p:outputLabel />
						<p:outputLabel value="Cel.2" style="font-size: 16pt;" />
						<p:inputMask value="#{responsavelController.responsavel.contato.cel2}"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
							mask="(99) 9 9999 - 9999" size="15" />
						<p:outputLabel />
						<p:outputLabel value="Cel.3" style="font-size: 16pt;" />
						<p:inputMask value="#{responsavelController.responsavel.contato.cel3}"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
							mask="(99) 9 9999 - 9999" size="15" />

					</p:panelGrid>
				</p:fieldset>
				<p:fieldset legend="Endereço" style="margin-top:15px">

					<p:panelGrid columns="5" layout="grid" style="margin-top:10px"
						styleClass="panelgrid-noborder"
						columnClasses="ui-grid-col-1.5,ui-grid-col-3,ui-grid-col-0.5,ui-grid-col-1.5,ui-grid-col-3">
						<p:outputLabel value="CEP" style="font-size: 16pt;" />
						<p:inputMask value="#{responsavelController.cep}" required="true" requiredMessage="Informe o CEP"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
							mask="99999-999" size="10">
							<p:ajax event="blur"
								listener="#{responsavelController.buscarCep()}" process="@this"
								update="end,log" />
						</p:inputMask>
						<p:outputLabel />
						<p:outputLabel value="Nº Casa" style="font-size: 16pt;" />
						<p:inputText
							value="#{responsavelController.responsavel.endereco.numero}" size="5"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#000;"
							onkeyup="$(this).val($(this).val().replace(/[^0-9]/g, ''));" />
					</p:panelGrid>
					<p:panelGrid columns="8" layout="grid" style="margin-top:10px"
						styleClass="panelgrid-noborder" id="end"
						columnClasses="ui-grid-col-1.5,ui-grid-col-1,ui-grid-col-1,ui-grid-col-1.5,ui-grid-col-3">

						<p:outputLabel value="U.F. -" style="font-size: 16pt;" />
						<p:outputLabel value="#{responsavelController.estado}"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#0000FF;" />
						<p:outputLabel />

						<p:outputLabel value="Cidade -" style="font-size: 16pt;" />
						<p:outputLabel value="#{responsavelController.cidade} "
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#0000FF;" />

						<p:outputLabel />
						<p:outputLabel value="Bairro -" style="font-size: 16pt;" />
						<p:outputLabel value="#{responsavelController.bairro} "
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#0000FF;" />

					</p:panelGrid>
					<p:panelGrid columns="2" layout="grid" style="margin-top:10px"
						styleClass="panelgrid-noborder" id="log"
						columnClasses="ui-grid-col-1.5,ui-grid-col-10.5">

						<p:outputLabel value="Logradouro -" style="font-size: 16pt;" />
						<p:outputLabel
							value="#{responsavelController.tipoLogradouro} #{responsavelController.logradouro}"
							style="margin-left:10px;font-size:14pt;font-weigth:bold;color:#0000FF;" />

					</p:panelGrid>
					
				</p:fieldset>
				
				
				
				<p:panelGrid columns="3" layout="grid" style="margin-top:10px"
					styleClass="panelgrid-noborder"
					columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4">
					<p:outputLabel />
					<p:commandButton value="Salvar" style="font-size:16px;width:150px" 
						action="#{responsavelController.salvarResp()}" process="form" />
					<p:outputLabel />
				</p:panelGrid>


				<!-- Painel -->
				<p:dialog widgetVar="painelCamera" resizable="false" width="620" 
					closable="false" position="top" showHeader="true" dynamic="true"
					header="Adicionar Imagem" style="margin-top:50px;" modal="true"
					showEffect="fade" hideEffect="fade" id="principal">
					
						<p:panelGrid columns="1" layout="grid"
							columnClasses="ui-grid-col-12" styleClass="panelgrid-noborder">

							<p:fileUpload auto="true" label="Abrir Pasta" skinSimple="true"
								allowTypes="/(\.|\/)(gif|jpe?g|png)$/" sizeLimit="7120000"
								invalidSizeMessage="Tamanho máximo da imagem 2000kb"
								invalidFileMessage="Formato de arquivo inválido"
								fileUploadListener="#{responsavelController.abrirPasta}"
								update="cropped_com_foto,botao" />

						</p:panelGrid>

						<p:panelGrid columns="2" layout="grid" id="painel"
							columnClasses="ui-grid-col-8,ui-grid-col-4"
							styleClass="panelgrid-noborder" style="width:100%">

							<p:panelGrid columns="1" layout="grid" id="cropped_com_foto"
								columnClasses="ui-grid-col-12" styleClass="panelgrid-noborder">

								<p:panel header="Foto" style="width: 340px; height: 320px;">

									<p:imageCropper boxHeight="250" boxWidth="300"
										initialCoords="225,75,280,125" id="imageCropperFotoId"
										rendered="#{responsavelController.exibirImagem != false}"
										image="#{pageContext.servletContext.contextPath}/resources/imagens/#{responsavelController.fotoCapturada}"
										value="#{responsavelController.imagemCortada}" />
									<center>

										<p:commandButton value="Cortar" process="cropped_com_foto"
											action="#{responsavelController.cortarImagem()}"
											icon="fa fa-cut" style="margin-top:15px; width:100px"
											update="panelFotoRecortadaId"
											rendered="#{responsavelController.exibeBotao == true}" />
									</center>
								</p:panel>

							</p:panelGrid>

							<p:panelGrid columns="1" layout="grid" style="margin:0px"
								columnClasses="ui-grid-col-12" styleClass="panelgrid-noborder">

								<p:panel id="panelFotoRecortadaId" header="Foto Recortada"
									style="width: 180px; height: 260px;">

									<p:graphicImage width="160px" cache="false"
										rendered="#{responsavelController.exibirImagemCortada != false}"
										value="#{responsavelController.imagemEnviada}" />
									<center>
										<p:commandButton value="Salvar" update="imagem-professor"
											icon="fa fa-check-square-o" process="panelFotoRecortadaId"
											rendered="#{responsavelController.exibeBotaoSalvar == true}"
											style="width:100px"
											action="#{responsavelController.salvarImagem}" />
									</center>
								</p:panel>

							</p:panelGrid>

						</p:panelGrid>

						<!-- Footer do Painel -->
						<p:panelGrid columns="3" layout="grid" id="botao"
							style="margin-left:50px"
							columnClasses="ui-grid-col-4,ui-grid-col-4,ui-grid-col-4"
							styleClass="panelgrid-noborder">
							<p:outputLabel/>
							<p:commandButton value="Fechar" icon="fa fa-close"
								process="@this" action="#{responsavelController.fecharTela}" />
							<p:outputLabel/>
						</p:panelGrid>
					
				</p:dialog>
				
				<p:dialog widgetVar="cadResp" resizable="false" width="620" 
					closable="false" position="top" showHeader="true" dynamic="true"
					header="Adicionar Responsável" style="margin-top:50px;" modal="true"
					showEffect="fade" hideEffect="fade" >
					
					
				</p:dialog>
			</h:form>
		</div>
	</ui:define>
</ui:composition>

